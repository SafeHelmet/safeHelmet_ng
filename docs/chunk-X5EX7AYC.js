import{e as G,f as J,g as O,j as Q,k as U,l as X}from"./chunk-3FHVCYYV.js";import{g as L}from"./chunk-UOEER7FR.js";import"./chunk-CRP2QCZ7.js";import{e as N,g as P,j,l as A,s as z,t as H,u as K,v as q}from"./chunk-TTLAKU4E.js";import"./chunk-S35HUXPS.js";import"./chunk-4US7J543.js";import{Fa as F,Ga as D,Ha as R,h as W,la as S}from"./chunk-B6PNUZMB.js";import{$ as m,Ba as s,Ca as h,Cb as n,Db as E,Eb as w,Hb as f,Ib as g,Jb as b,Kb as I,Lb as v,Na as B,Ua as M,Wb as V,aa as c,ab as C,db as k,jb as e,kb as t,lb as u,pb as y,qb as _,rb as x,vc as T}from"./chunk-SWZJMIZX.js";import"./chunk-ODN5LVDJ.js";var Z=()=>({width:"70vw"}),$=()=>({"min-width":"50rem"});function ee(d,a){d&1&&(e(0,"tr",14)(1,"th",15),n(2,"Code"),t(),e(3,"th",16),n(4,"Name "),u(5,"p-sortIcon",17),t(),e(6,"th",18),n(7,"Surname "),u(8,"p-sortIcon",19),t(),e(9,"th",20),n(10,"Fiscal code"),t(),u(11,"th",21),t())}function te(d,a){if(d&1){let r=y();e(0,"tr",22)(1,"td"),n(2),t(),e(3,"td"),n(4),t(),e(5,"td"),n(6),t(),e(7,"td"),n(8),t(),e(9,"td")(10,"p-button",23),_("click",function(){let l=m(r).$implicit,p=x();return c(p.selectBoss(l))}),t()()()}if(d&2){let r=a.$implicit;s(2),E(r.id),s(2),w(" ",r.name," "),s(2),w(" ",r.surname," "),s(2),w(" ",r.fiscal_code," ")}}var Y=class d{constructor(a,r,i){this.bossService=a;this.router=r;this.messageService=i;this.bossService.getAllBosses().subscribe(l=>{this.bosses=l,this.filteredBosses=[...this.bosses]})}showSearchDialog=!0;bosses=[];filteredBosses=[];filterValues={name:"",surname:"",fiscal_code:""};selectBoss(a){if(!a.id){this.messageService.add({severity:"error",summary:"Error",detail:"Boss ID is missing"});return}localStorage.setItem("boss_id",a.id.toString()),this.router.navigate(["/worksites"])}applyFilters(){this.filteredBosses=this.bosses.filter(a=>{let r=this.filterValues.name?a.name.toLowerCase().includes(this.filterValues.name.toLowerCase()):!0,i=this.filterValues.surname?a.surname.toString().includes(this.filterValues.surname.toString()):!0,l=this.filterValues.fiscal_code?a.fiscal_code.toLowerCase().includes(this.filterValues.fiscal_code.toLowerCase()):!0;return r&&i&&l})}clearFilter(){this.filterValues={name:"",surname:"",fiscal_code:""},this.filteredBosses=[...this.bosses]}static \u0275fac=function(r){return new(r||d)(h(L),h(W),h(S))};static \u0275cmp=B({type:d,selectors:[["app-boss-selection"]],features:[I([S])],decls:23,vars:16,consts:[["header",""],["body",""],["header","Select boss",3,"visibleChange","visible","modal","closable","draggable","resizable"],[1,"p-fluid"],[1,"p-field","rowForm"],["for","name"],["pInputText","","id","name","placeholder","Enter name",3,"ngModelChange","ngModel"],["for","surname"],["pInputText","","id","surname","placeholder","Enter surname",3,"ngModelChange","ngModel"],["for","fiscal_code"],["pInputText","","id","fiscal_code","placeholder","Enter fiscal code",3,"ngModelChange","ngModel"],["pButton","","type","button","label","Apply","icon","pi pi-check",1,"p-button-success","margin-bottom",3,"click"],["pButton","","type","button","label","Reset","icon","pi pi-times",1,"p-button-secondary","margin-left","margin-bottom",3,"click"],["dataKey","id",1,"tableColor",3,"value","paginator","rows","tableStyle"],[1,"tableHeader"],[2,"width","10%"],["pSortableColumn","name",2,"width","20%"],["field","name"],["pSortableColumn","surname",2,"width","20%"],["field","surname"],[2,"width","20%"],[2,"width","5%"],[1,"tableRow"],["rounded","","severity","secondary","label","Select",3,"click"]],template:function(r,i){if(r&1){let l=y();e(0,"p-dialog",2),b("visibleChange",function(o){return m(l),g(i.showSearchDialog,o)||(i.showSearchDialog=o),c(o)}),e(1,"div",3)(2,"div",4)(3,"label",5),n(4,"Name:"),t(),e(5,"input",6),b("ngModelChange",function(o){return m(l),g(i.filterValues.name,o)||(i.filterValues.name=o),c(o)}),t()(),e(6,"div",4)(7,"label",7),n(8,"Surname:"),t(),e(9,"input",8),b("ngModelChange",function(o){return m(l),g(i.filterValues.surname,o)||(i.filterValues.surname=o),c(o)}),t()(),e(10,"div",4)(11,"label",9),n(12,"Fiscal code:"),t(),e(13,"input",10),b("ngModelChange",function(o){return m(l),g(i.filterValues.fiscal_code,o)||(i.filterValues.fiscal_code=o),c(o)}),t()()(),u(14,"br"),e(15,"button",11),_("click",function(){return m(l),c(i.applyFilters())}),t(),e(16,"button",12),_("click",function(){return m(l),c(i.clearFilter())}),t(),u(17,"br"),e(18,"p-table",13),M(19,ee,12,0,"ng-template",null,0,V)(21,te,11,4,"ng-template",null,1,V),t()()}r&2&&(k(v(14,Z)),f("visible",i.showSearchDialog),C("modal",!0)("closable",!0)("draggable",!1)("resizable",!1),s(5),f("ngModel",i.filterValues.name),s(4),f("ngModel",i.filterValues.surname),s(4),f("ngModel",i.filterValues.fiscal_code),s(5),C("value",i.filteredBosses)("paginator",!0)("rows",10)("tableStyle",v(15,$)))},dependencies:[R,F,D,q,K,H,P,j,T,N,z,A,Q,G,J,O,X,U],styles:[`.column{float:left;width:50%}.row:after{content:"";display:table;clear:both}.float-right{float:right;margin-top:18px}.rowForm{display:flex;align-items:center;margin-bottom:1rem}label{flex:0 0 25%;text-align:left;margin-right:4rem}input{flex:1;padding:.5rem;--p-inputtext-background: #f0f0f0;--p-inputtext-color: #000000;border:1px solid #ccc;border-radius:4px}.form-container{max-width:800px}p-toast{--p-toast-error-detail-color: #000000;--p-toast-success-detail-color: #000000}p-table{margin-top:10px}p-paginator{--p-paginator-background: #f1f1f1;--p-paginator-nav-button-selected-background: #34d399}.p-dialog{--p-dialog-background: white;--p-dialog-color: black}.tableColor{--p-content-background: #f1f1f1;--p-datatable-header-cell-background: #f1f1f1;--p-datatable-header-cell-text-color: #000;--p-datatable-header-cell-text-font-weight: 600}.tableColor .p-datatable-header,.tableColor .p-datatable-body,.tableColor .p-datatable-body-cell{background-color:#f1f1f1}.tableColor .p-datatable-body-row{--p-datatable-row-background: #f1f1f1}.tableRow{--p-datatable-row-background: #f1f1f1;--p-datatable-row-color: #000}.tableRow:hover{--p-datatable-row-background: #e1e1e1;--p-datatable-row-color: #000}.tableHeader{--p-datatable-header-cell-background: #f1f1f1;--p-datatable-header-cell-color: #000;--p-datatable-header-cell-selected-color: #34d399;--p-datatable-header-cell-selected-background: #f1f1f1}.margin-left{margin-left:1rem}.margin-right{margin-right:1rem}.margin-top{margin-top:1rem}.margin-bottom{margin-bottom:1rem}
`],encapsulation:2})};export{Y as BossSelectionComponent};

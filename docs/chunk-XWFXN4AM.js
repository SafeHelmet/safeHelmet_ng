import{e as X,f as Z,g as $,j as ee,k as te,l as ie,m as b,n as g}from"./chunk-VRDDV6PN.js";import"./chunk-L4OTOQAV.js";import"./chunk-CRP2QCZ7.js";import{e as z,g as j,j as K,l as G,s as Y,t as q,u as J,v as Q}from"./chunk-TTLAKU4E.js";import"./chunk-S35HUXPS.js";import"./chunk-4US7J543.js";import{Fa as P,Ga as U,Ha as L,a as f,b as D,h as H,la as C}from"./chunk-B6PNUZMB.js";import{$ as c,Ba as m,Ca as w,Cb as l,Db as F,Eb as E,Hb as h,Ib as S,Jb as _,Kb as N,Lb as T,N as I,Na as x,S as k,Ua as O,Wb as M,aa as d,ab as B,db as A,jb as o,kb as r,lb as u,pb as V,qb as y,rb as R,vc as W}from"./chunk-SWZJMIZX.js";import"./chunk-ODN5LVDJ.js";var v=class s{constructor(e){this.http=e}addBoss(e){let t=new f().set("Authorization",b.AUTH_TOKEN);return this.http.post(g.API.ROUTES.BOSSES.BASE,e,{headers:t})}getBossById(e){let t=new f().set("Authorization",b.AUTH_TOKEN);return this.http.get(g.API.ROUTES.BOSSES.GET_BY_ID(e),{headers:t})}editBossById(e,t){let i=new f().set("Authorization",b.AUTH_TOKEN);return this.http.put(g.API.ROUTES.BOSSES.UPDATE(e),t,{headers:i})}deleteBoss(e){let t=new f().set("Authorization",b.AUTH_TOKEN);return this.http.delete(g.API.ROUTES.BOSSES.DELETE(e),{headers:t})}getAllBosses(){let e=new f().set("Authorization",b.AUTH_TOKEN);return this.http.get(g.API.ROUTES.BOSSES.BASE,{headers:e})}static \u0275fac=function(t){return new(t||s)(k(D))};static \u0275prov=I({token:s,factory:s.\u0275fac,providedIn:"root"})};var ne=()=>({width:"70vw"}),le=()=>({"min-width":"50rem"});function se(s,e){s&1&&(o(0,"tr",14)(1,"th",15),l(2,"Code"),r(),o(3,"th",16),l(4,"Name "),u(5,"p-sortIcon",17),r(),o(6,"th",18),l(7,"Surname "),u(8,"p-sortIcon",19),r(),o(9,"th",20),l(10,"Fiscal code"),r(),u(11,"th",21),r())}function me(s,e){if(s&1){let t=V();o(0,"tr",22)(1,"td"),l(2),r(),o(3,"td"),l(4),r(),o(5,"td"),l(6),r(),o(7,"td"),l(8),r(),o(9,"td")(10,"p-button",23),y("click",function(){let n=c(t).$implicit,p=R();return d(p.selectBoss(n))}),r()()()}if(s&2){let t=e.$implicit;m(2),F(t.id),m(2),E(" ",t.name," "),m(2),E(" ",t.surname," "),m(2),E(" ",t.fiscal_code," ")}}var oe=class s{constructor(e,t,i){this.bossService=e;this.router=t;this.messageService=i;this.bossService.getAllBosses().subscribe(n=>{this.bosses=n,this.filteredBosses=[...this.bosses]})}showSearchDialog=!0;bosses=[];filteredBosses=[];filterValues={name:"",surname:"",fiscal_code:""};selectBoss(e){if(!e.id){this.messageService.add({severity:"error",summary:"Error",detail:"Boss ID is missing"});return}localStorage.setItem("boss_id",e.id.toString()),this.router.navigate(["/worksites"])}applyFilters(){this.filteredBosses=this.bosses.filter(e=>{let t=this.filterValues.name?e.name.toLowerCase().includes(this.filterValues.name.toLowerCase()):!0,i=this.filterValues.surname?e.surname.toString().includes(this.filterValues.surname.toString()):!0,n=this.filterValues.fiscal_code?e.fiscal_code.toLowerCase().includes(this.filterValues.fiscal_code.toLowerCase()):!0;return t&&i&&n})}clearFilter(){this.filterValues={name:"",surname:"",fiscal_code:""},this.filteredBosses=[...this.bosses]}static \u0275fac=function(t){return new(t||s)(w(v),w(H),w(C))};static \u0275cmp=x({type:s,selectors:[["app-boss-selection"]],features:[N([C])],decls:23,vars:16,consts:[["header",""],["body",""],["header","Select boss",3,"visibleChange","visible","modal","closable","draggable","resizable"],[1,"p-fluid"],[1,"p-field","rowForm"],["for","name"],["pInputText","","id","name","placeholder","Enter name",3,"ngModelChange","ngModel"],["for","surname"],["pInputText","","id","surname","placeholder","Enter surname",3,"ngModelChange","ngModel"],["for","fiscal_code"],["pInputText","","id","fiscal_code","placeholder","Enter fiscal code",3,"ngModelChange","ngModel"],["pButton","","type","button","label","Apply","icon","pi pi-check",1,"p-button-success","margin-bottom",3,"click"],["pButton","","type","button","label","Reset","icon","pi pi-times",1,"p-button-secondary","margin-left","margin-bottom",3,"click"],["dataKey","id",1,"tableColor",3,"value","paginator","rows","tableStyle"],[1,"tableHeader"],[2,"width","10%"],["pSortableColumn","name",2,"width","20%"],["field","name"],["pSortableColumn","surname",2,"width","20%"],["field","surname"],[2,"width","20%"],[2,"width","5%"],[1,"tableRow"],["rounded","","severity","secondary","label","Select",3,"click"]],template:function(t,i){if(t&1){let n=V();o(0,"p-dialog",2),_("visibleChange",function(a){return c(n),S(i.showSearchDialog,a)||(i.showSearchDialog=a),d(a)}),o(1,"div",3)(2,"div",4)(3,"label",5),l(4,"Name:"),r(),o(5,"input",6),_("ngModelChange",function(a){return c(n),S(i.filterValues.name,a)||(i.filterValues.name=a),d(a)}),r()(),o(6,"div",4)(7,"label",7),l(8,"Surname:"),r(),o(9,"input",8),_("ngModelChange",function(a){return c(n),S(i.filterValues.surname,a)||(i.filterValues.surname=a),d(a)}),r()(),o(10,"div",4)(11,"label",9),l(12,"Fiscal code:"),r(),o(13,"input",10),_("ngModelChange",function(a){return c(n),S(i.filterValues.fiscal_code,a)||(i.filterValues.fiscal_code=a),d(a)}),r()()(),u(14,"br"),o(15,"button",11),y("click",function(){return c(n),d(i.applyFilters())}),r(),o(16,"button",12),y("click",function(){return c(n),d(i.clearFilter())}),r(),u(17,"br"),o(18,"p-table",13),O(19,se,12,0,"ng-template",null,0,M)(21,me,11,4,"ng-template",null,1,M),r()()}t&2&&(A(T(14,ne)),h("visible",i.showSearchDialog),B("modal",!0)("closable",!0)("draggable",!1)("resizable",!1),m(5),h("ngModel",i.filterValues.name),m(4),h("ngModel",i.filterValues.surname),m(4),h("ngModel",i.filterValues.fiscal_code),m(5),B("value",i.filteredBosses)("paginator",!0)("rows",10)("tableStyle",T(15,le)))},dependencies:[L,P,U,Q,J,q,j,K,W,z,Y,G,ee,X,Z,$,ie,te],styles:[`.column{float:left;width:50%}.row:after{content:"";display:table;clear:both}.float-right{float:right;margin-top:18px}.rowForm{display:flex;align-items:center;margin-bottom:1rem}label{flex:0 0 25%;text-align:left;margin-right:4rem}input{flex:1;padding:.5rem;--p-inputtext-background: #f0f0f0;--p-inputtext-color: #000000;border:1px solid #ccc;border-radius:4px}.form-container{max-width:800px}p-toast{--p-toast-error-detail-color: #000000;--p-toast-success-detail-color: #000000}p-table{margin-top:10px}p-paginator{--p-paginator-background: #f1f1f1;--p-paginator-nav-button-selected-background: #34d399}.p-dialog{--p-dialog-background: white;--p-dialog-color: black}.tableColor{--p-content-background: #f1f1f1;--p-datatable-header-cell-background: #f1f1f1;--p-datatable-header-cell-text-color: #000;--p-datatable-header-cell-text-font-weight: 600}.tableColor .p-datatable-header,.tableColor .p-datatable-body,.tableColor .p-datatable-body-cell{background-color:#f1f1f1}.tableColor .p-datatable-body-row{--p-datatable-row-background: #f1f1f1}.tableRow{--p-datatable-row-background: #f1f1f1;--p-datatable-row-color: #000}.tableRow:hover{--p-datatable-row-background: #e1e1e1;--p-datatable-row-color: #000}.tableHeader{--p-datatable-header-cell-background: #f1f1f1;--p-datatable-header-cell-color: #000;--p-datatable-header-cell-selected-color: #34d399;--p-datatable-header-cell-selected-background: #f1f1f1}.margin-left{margin-left:1rem}.margin-right{margin-right:1rem}.margin-top{margin-top:1rem}.margin-bottom{margin-bottom:1rem}
`],encapsulation:2})};export{oe as BossSelectionComponent};
